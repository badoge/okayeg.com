const fs=require("fs");let s24=JSON.parse(fs.readFileSync("24.json")),s25=JSON.parse(fs.readFileSync("25.json")),s26=JSON.parse(fs.readFileSync("26.json")),s27=JSON.parse(fs.readFileSync("27.json")),s28=JSON.parse(fs.readFileSync("28.json")),s29=JSON.parse(fs.readFileSync("29.json")),s30=JSON.parse(fs.readFileSync("30.json")),s31=JSON.parse(fs.readFileSync("31.json")),s32=JSON.parse(fs.readFileSync("32.json")),s33=JSON.parse(fs.readFileSync("33.json")),s34=JSON.parse(fs.readFileSync("34.json")),s35=JSON.parse(fs.readFileSync("35.json")),seasons=[s24,s25,s26,s27,s28,s29,s30,s31,s32,s33,s34,s35],users=[];for(let s=0;s<seasons.length;s++){const e=seasons[s];let r=24+s;for(let s=0;s<e.length;s++){const l=e[s],i=users.findIndex((s=>s._id===l._id));(l.egs||l.eguses||l.egseaten||l.uses||l.coinflips||l.coinflipwins||l.biggestcoinflipwin||l.biggestcoinfliploss||l.plus||l.zero||l.negative||l.lotteryjoins||l.lotterywins||l.egsgiven||l.egsreceived||l.shungite||l.chicken||l.bajcoin||l.copium||l.trivia||l.duels||l.duelswon||l.biggestduelwin||l.biggestduelloss||l.roulettes||l.rouletteswon||l.biggestroulettewin||l.biggestrouletteloss)&&(i>-1?(users[i].username=l.username,users[i].egs+=l.egs,users[i].eguses+=l.eguses,users[i].egseaten+=l.egseaten,users[i].uses+=l.uses-l.eguses,users[i].coinflips+=l.coinflips,users[i].coinflipwins+=l.coinflipwins,users[i].biggestcoinflipwin=l.biggestcoinflipwin>users[i].biggestcoinflipwin?l.biggestcoinflipwin:users[i].biggestcoinflipwin,users[i].biggestcoinfliploss=l.biggestcoinfliploss>users[i].biggestcoinfliploss?l.biggestcoinfliploss:users[i].biggestcoinfliploss,users[i].plus+=l.plus,users[i].zero+=l.zero,users[i].negative+=l.negative,users[i].lotteryjoins+=l.lotteryjoins,users[i].lotterywins+=l.lotterywins,users[i].egsgiven+=l.egsgiven,users[i].egsreceived+=l.egsreceived,users[i].shungite+=l.shungite,users[i].chicken+=l.chicken,users[i].bajcoin+=l.bajcoin,users[i].copium+=l.copium,users[i].trivia+=l.trivia||0,users[i].duels+=l.duels||0,users[i].duelswon+=l.duelswon||0,users[i].biggestduelwin=l.biggestduelwin>users[i].biggestduelwin?l.biggestduelwin:users[i].biggestduelwin,users[i].biggestduelloss=l.biggestduelloss>users[i].biggestduelloss?l.biggestduelloss:users[i].biggestduelloss,users[i].roulettes+=l.roulettes||0,users[i].rouletteswon+=l.rouletteswon||0,users[i].biggestroulettewin=l.biggestroulettewin>users[i].biggestroulettewin?l.biggestroulettewin:users[i].biggestroulettewin,users[i].biggestrouletteloss=l.biggestrouletteloss>users[i].biggestrouletteloss?l.biggestrouletteloss:users[i].biggestrouletteloss,users[i].seasons.push(r)):users.push({_id:l._id,username:l.username,egs:l.egs,eguses:l.eguses,egseaten:l.egseaten,uses:l.uses-l.eguses,coinflips:l.coinflips,coinflipwins:l.coinflipwins,biggestcoinflipwin:l.biggestcoinflipwin,biggestcoinfliploss:l.biggestcoinfliploss,plus:l.plus,zero:l.zero,negative:l.negative,lotteryjoins:l.lotteryjoins,lotterywins:l.lotterywins,egsgiven:l.egsgiven,egsreceived:l.egsreceived,shungite:l.shungite,chicken:l.chicken,bajcoin:l.bajcoin,copium:l.copium,trivia:l.trivia||0,duels:l.duels||0,duelswon:l.duelswon||0,biggestduelwin:l.biggestduelwin||0,biggestduelloss:l.biggestduelloss||0,roulettes:l.roulettes||0,rouletteswon:l.rouletteswon||0,biggestroulettewin:l.biggestroulettewin||0,biggestrouletteloss:l.biggestrouletteloss||0,seasons:[r]}))}}for(let s=0;s<users.length;s++)users[s].coinflips>10&&(users[s].coinflipwinrate=roundToTwo(users[s].coinflipwins/users[s].coinflips*100)),users[s].duels>10&&(users[s].duelwinrate=roundToTwo(users[s].duelswon/users[s].duels*100)),users[s].roulettes>10&&(users[s].roulettewinrate=roundToTwo(users[s].rouletteswon/users[s].roulettes*100));let global={users:0,egs:0,eguses:0,egseaten:0,uses:0,coinflips:0,coinflipwins:0,plus:0,zero:0,negative:0,lotteryjoins:0,egsgiven:0,egsreceived:0,shungite:0,chicken:0,bajcoin:0,copium:0,trivia:0,duels:0,roulettes:0,rouletteswon:0,allSeasons:0,egsArray:[],egusesArray:[],egseatenArray:[],usesArray:[],lotteryjoinsArray:[],lotterywinsArray:[],coinflipwinsArray:[],shungiteArray:[],chickenArray:[],bajcoinArray:[],copiumArray:[],triviaArray:[],duelswonArray:[],biggestduelwinArray:[],biggestduellossArray:[],rouletteswonArray:[],coinflipwinrateArray:[],duelwinrateArray:[],roulettewinrateArray:[],unluckylotteryArray:[]};for(let s=0;s<users.length;s++)global.users++,global.egs+=users[s].egs,global.eguses+=users[s].eguses,global.egseaten+=users[s].egseaten,global.uses+=users[s].uses,global.coinflips+=users[s].coinflips,global.coinflipwins+=users[s].coinflipwins,global.plus+=users[s].plus,global.zero+=users[s].zero,global.negative+=users[s].negative,global.lotteryjoins+=users[s].lotteryjoins,global.egsgiven+=users[s].egsgiven,global.egsreceived+=users[s].egsreceived,global.shungite+=users[s].shungite,global.chicken+=users[s].chicken,global.bajcoin+=users[s].bajcoin,global.copium+=users[s].copium,global.trivia+=users[s].trivia,global.duels+=users[s].duels,global.roulettes+=users[s].roulettes,global.rouletteswon+=users[s].rouletteswon,global.egsArray.push(users[s].egs),global.egusesArray.push(users[s].eguses),global.egseatenArray.push(users[s].egseaten),global.usesArray.push(users[s].uses),global.lotteryjoinsArray.push(users[s].lotteryjoins),global.lotterywinsArray.push(users[s].lotterywins),global.coinflipwinsArray.push(users[s].coinflipwins),global.shungiteArray.push(users[s].shungite),global.chickenArray.push(users[s].chicken),global.bajcoinArray.push(users[s].bajcoin),global.copiumArray.push(users[s].copium),global.triviaArray.push(users[s].trivia),global.duelswonArray.push(users[s].duelswon),global.biggestduelwinArray.push(users[s].biggestduelwin),global.biggestduellossArray.push(users[s].biggestduelloss),global.rouletteswonArray.push(users[s].rouletteswon),users[s]?.coinflipwinrate&&global.coinflipwinrateArray.push(users[s].coinflipwinrate),users[s]?.duelwinrate&&global.duelwinrateArray.push(users[s].duelwinrate),users[s]?.roulettewinrate&&global.roulettewinrateArray.push(users[s].roulettewinrate),users[s].lotteryjoins>10&&0==users[s].lotterywins&&global.unluckylotteryArray.push(users[s].lotteryjoins),sortAndClean(global.egsArray),sortAndClean(global.egusesArray),sortAndClean(global.egseatenArray),sortAndClean(global.usesArray),sortAndClean(global.lotteryjoinsArray),sortAndClean(global.lotterywinsArray),sortAndClean(global.coinflipwinsArray),sortAndClean(global.shungiteArray),sortAndClean(global.chickenArray),sortAndClean(global.bajcoinArray),sortAndClean(global.copiumArray),sortAndClean(global.triviaArray),sortAndClean(global.duelswonArray),sortAndClean(global.biggestduelwinArray),sortAndClean(global.biggestduellossArray),sortAndClean(global.rouletteswonArray),sortAndClean(global.coinflipwinrateArray),sortAndClean(global.duelwinrateArray),sortAndClean(global.roulettewinrateArray),sortAndClean(global.unluckylotteryArray),12==users[s].seasons.length&&global.allSeasons++;function sortAndClean(s){for(let e=0;e<s.length;e++)s[e]<=0&&s.splice(e,1);s.sort((function(s,e){return e-s}))}function roundToTwo(s){return+(Math.round(s+"e+2")+"e-2")}fs.writeFileSync("usersrecap.json",JSON.stringify(users)),fs.writeFileSync("globalrecap.json",JSON.stringify(global));